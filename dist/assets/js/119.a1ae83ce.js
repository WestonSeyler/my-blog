(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{561:function(t,e,a){"use strict";a.r(e);var p=a(30),r=Object(p.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("php.ini 有点复杂\n首先php运行有命令行模式(比如 composer安装模块依赖)和 web模式(就是打开页面时正常模式)\n两种模式加载的php.ini可能不一样。")]),t._v(" "),a("h3",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[t._v("#")]),t._v(" Windows")]),t._v(" "),a("p",[t._v("在Windows，如果你是用的wamp。命令行模式用到的php.ini在apache2目录下，正常模式，如果你使用的php版本是7.2。则用到的php.ini在php7.2目录下。")]),t._v(" "),a("h3",{attrs:{id:"macos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[t._v("#")]),t._v(" MacOS")]),t._v(" "),a("p",[t._v("如果是用brew安装的PHP。跑的是fpm。\n新建个test.php。内容 "),a("code",[t._v("<?php phpinfo() ?>")]),t._v("。浏览器运行。\n会看到如下信息：\n主配置文件是: "),a("code",[t._v("/usr/local/etc/php/7.1/php.ini")]),t._v("\n额外的配置文件: "),a("code",[t._v("/usr/local/etc/php/7.1/conf.d")]),t._v(" "),a("img",{attrs:{src:"https://hexo-blog.pek3b.qingstor.com/upload_images/71414-41c1e13c0a3173cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}}),t._v("\n你还可以在 "),a("code",[t._v("/usr/local/etc/php/7.1/php-fpm.d/www.conf")]),t._v(" 此文件下面定义配置项。这个文件被 [php-fpm.conf] 包含")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://php.net/manual/zh/install.fpm.configuration.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("php-fpm.conf"),a("OutboundLink")],1),t._v(" 是php-fpm进程服务的配置文件")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  ######设置错误日志的路径\n  error_log = /var/log/php-fpm/error.log\n  ######引入www.conf文件中的配置\n  include=/usr/local/php7.1/etc/php-fpm.d/*.conf\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("www.conf")]),t._v(" 这是php-fpm进程服务的扩展配置文件 (php-fpm.d目录下)")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://hexo-blog.pek3b.qingstor.com/upload_images/71414-3c1ea4934d74cb69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),t._v(" "),a("h3",{attrs:{id:"可修改范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可修改范围"}},[t._v("#")]),t._v(" 可修改范围")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://hexo-blog.pek3b.qingstor.com/upload_images/71414-0cd7abe8a63bf5b4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}}),t._v(" "),a("a",{attrs:{href:"http://php.net/manual/zh/ini.core.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("核心配置选项说明"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"针对项目使用配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对项目使用配置项"}},[t._v("#")]),t._v(" 针对项目使用配置项")]),t._v(" "),a("p",[t._v("在项目入口目录新建 "),a("code",[t._v(".user.ini")])]),t._v(" "),a("h3",{attrs:{id:"查看命令行模式下加载哪些ini文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看命令行模式下加载哪些ini文件"}},[t._v("#")]),t._v(" 查看命令行模式下加载哪些ini文件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://hexo-blog.pek3b.qingstor.com/upload_images/71414-5da7950228e4f032.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})]),t._v(" "),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("p",[t._v("http://php.net/configuration.file\nhttps://typecodes.com/web/php7configure.html")]),t._v(" "),a("h3",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("mac下如何重启php-fpm？，我在")]),t._v(" "),a("ol",[a("li",[t._v("/usr/local/etc/php/7.1/php-fpm.d/www.conf")]),t._v(" "),a("li",[t._v("项目入口目录下新建了 .user.ini")]),t._v(" "),a("li",[t._v("/usr/local/etc/php/7.1/conf.d/php-memory-limits.ini")]),t._v(" "),a("li",[t._v("/usr/local/etc/php/7.1/php.ini")]),t._v(" "),a("li",[t._v("/usr/local/etc/php/7.1/conf.d/user.ini")])]),t._v(" "),a("p",[t._v("上述5个配置文件都添加了 memory_limit 配置项，值分别是111M 到 555M")]),t._v(" "),a("ul",[a("li",[t._v("生效的是www.conf，然后去掉 www.conf 中的 "),a("code",[t._v("memory_limit = 111M")]),t._v("，重启 "),a("code",[t._v("brew services restart php71")]),t._v("\n值依然是111，非常纳闷。要么不是这么重启，要么还有缓存？")]),t._v(" "),a("li",[t._v("重启电脑后显示"),a("code",[t._v("memory_limit = 555M")]),t._v("， 因为加载顺序。 user.ini 在 php-memory-limits.ini 后面把前面的覆盖了。")])]),t._v(" "),a("h3",{attrs:{id:"监测配置项是否被加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监测配置项是否被加载"}},[t._v("#")]),t._v(" 监测配置项是否被加载")]),t._v(" "),a("p",[a("code",[t._v("var_dump(ini_get('curl.cainfo'));")])])])}),[],!1,null,null,null);e.default=r.exports}}]);