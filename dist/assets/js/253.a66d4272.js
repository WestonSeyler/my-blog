(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{708:function(s,n,e){"use strict";e.r(n);var r=e(30),a=Object(r.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("用爬虫过程中，如果用同一IP请求过多，会被服务端屏蔽，这时可以去网站上如 "),e("a",{attrs:{href:"https://www.xicidaili.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("西刺免费代理IP"),e("OutboundLink")],1),s._v(" 找一些免费IP代理，如果你已经有了自己的服务器，并且运行的是 nginx 服务器，就可以把自己的服务器也当成免费的代理服务器。")]),s._v(" "),e("ol",[e("li",[s._v("安装过程略，建议用Docker")]),s._v(" "),e("li",[s._v("sites-enabled 下新建配置文件，如 proxy\n编辑内容如下：")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    resolver      8.8.8.8;\n    server {\n       listen 8888;\n       location / {\n           proxy_pass http://$http_host$request_uri;\n       }\n    }\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("重启 nginx "),e("code",[s._v("sudo nginx -s reload")])])]),s._v(" "),e("blockquote",[e("ol",[e("li",[s._v("注意, resolver是必填的")]),s._v(" "),e("li",[s._v("仅供演示，有安全隐患，建议加上用户密码限制")])])]),s._v(" "),e("p",[s._v("使用Python测试")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('import urllib.request\nimport urllib.parse\n#  proxy练习\n\n\n# 可以找些免费的代理IP\n# https://www.xicidaili.com/2019-06-01/henan\n\nreq_url = "http://www.baidu.com"\n# 改为列表，当作代理池\nproxy_addr = "163.204.240.138:8090"\n\n\ndef use_proxy(req_url, proxy_addr):\n    proxy = urllib.request.ProxyHandler({"http": proxy_addr})\n    opener = urllib.request.build_opener(proxy, urllib.request.HTTPHandler)\n    urllib.request.install_opener(opener)\n    data = urllib.request.urlopen(req_url).read().decode("utf-8", "ignore")\n    return data\n\ndata = use_proxy(req_url, proxy_addr)\nprint(len(data))\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);