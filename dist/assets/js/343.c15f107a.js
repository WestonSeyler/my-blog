(window.webpackJsonp=window.webpackJsonp||[]).push([[343],{780:function(s,t,a){"use strict";a.r(t);var n=a(30),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("注：由于前端更新非常快，写这篇文章时 create-react-app 使用的版本是1.4.1 最新的使用流程请参照官方文档。\n"),a("a",{attrs:{href:"https://github.com/facebookincubator/create-react-app",target:"_blank",rel:"noopener noreferrer"}},[s._v("create-react-app"),a("OutboundLink")],1),s._v(" 是facebook推出的快速创建react项目的命令行工具。\n他和 "),a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/installation.html#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7-CLI",target:"_blank",rel:"noopener noreferrer"}},[s._v("vue-cli"),a("OutboundLink")],1),s._v(" 类似。开箱即用，不用改一行配置就可以开发出针对开发和生产环境的react项目。\n比如针对开发环境有eslint语法检测，热重载，带有proxy server等功能。\n这些东西大多要归功于webpack的功劳。")]),s._v(" "),a("p",[s._v("默认情况下webpack配置文件不会暴露出来，这不满足我当前的需求，比如这里我喜欢用 stylus(一个类似less，sass的样式预处理器)。stylus 和 sass 类似，支持变量，mixin，函数等功能，而且连括号，分号都不用写。用缩进区分。\ncreate-react-app 支持执行 "),a("code",[s._v("npm run reject")]),s._v(" 将相关配置文件释放到根目录下。注意这里是不可逆操作。")]),s._v(" "),a("p",[s._v("官网的 readme 中有怎么添加 sass 和 less 的"),a("a",{attrs:{href:"https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#adding-a-css-preprocessor-sass-less-etc",target:"_blank",rel:"noopener noreferrer"}},[s._v("教程"),a("OutboundLink")],1),s._v(" 没有讲如何添加 stylus 支持，其实这也难不倒咱。\n具体步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("项目根目录执行 "),a("code",[s._v("npm run reject")]),s._v("，会发现多出来个 config 目录，里面的各个配置文件都带有详尽的注释")]),s._v(" "),a("li",[s._v("安装 stylus 相关依赖，执行 "),a("code",[s._v("npm install stylus stylus-loader --save-dev")]),s._v(" 或 "),a("code",[s._v("yarn add stylus stylus-loader")])]),s._v(" "),a("li",[s._v("打开 "),a("code",[s._v("config\\webpack.config.dev.js")]),s._v(" 我们让webpack支持解析 styl 格式的文件\n在 module->rules->oneOf 组下面添加")])]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.styl$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n              require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n              require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'stylus-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://hexo-blog.pek3b.qingstor.com/upload_images/71414-9c99e308a7678c47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}}),s._v("\n4.  打开 "),a("code",[s._v("webpack.config.prod.js")]),s._v(" 添加如下(这是我参考下面的针对的css配置，需要更进一步测试)这是因为prod环境下，所有的css都被 "),a("a",{attrs:{href:"https://doc.webpack-china.org/plugins/extract-text-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[s._v("ExtractTextPlugin"),a("OutboundLink")],1),s._v(" 插件提取到同一个样式文件中，开发环境则是动态的创建style标签并插入到html的header中。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("            {\n                test: /\\.styl$/,\n                loader: ExtractTextPlugin.extract(\n                    Object.assign(\n                        {\n                            fallback: require.resolve('style-loader'),\n                            use: [\n                                {\n                                    loader: require.resolve('css-loader'),\n                                    options: {\n                                        importLoaders: 1,\n                                        minimize: true,\n                                        sourceMap: shouldUseSourceMap,\n                                    },\n                                },\n                                {\n                                  loader: require.resolve('stylus-loader'),\n                                }\n                            ],\n                        },\n                        extractTextPluginOptions\n                    )\n                ),\n                // Note: this won't work without `new ExtractTextPlugin()` in `plugins`.\n            },\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("新建目录 "),a("code",[s._v("src\\static\\styl")]),s._v(" 并创建 base.styl\n内容如下：")])]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[s._v("body\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("padding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("background-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" #f1f1f1\n  *\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("padding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("box-sizing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" border-box\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"微软雅黑"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Times New Roman"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Georgia"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Serif\na\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("text-decoration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" none\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ol",{attrs:{start:"6"}},[a("li",[s._v("打开 "),a("code",[s._v("src\\index.js")]),s._v("，添加 "),a("code",[s._v("import './static/styl/index.styl';")])]),s._v(" "),a("li",[s._v("最后重新执行 "),a("code",[s._v("npm run start")]),s._v(" 或 "),a("code",[s._v("yarn start")]),s._v(" 就能看到样式变化了。")])]),s._v(" "),a("p",[s._v("参考：\nhttps://cn.vuejs.org/v2/guide/comparison.html#React")])])}),[],!1,null,null,null);t.default=e.exports}}]);