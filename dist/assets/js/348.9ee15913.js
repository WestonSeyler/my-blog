(window.webpackJsonp=window.webpackJsonp||[]).push([[348],{784:function(n,s,t){"use strict";t.r(s);var e=t(30),a=Object(e.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("p",[n._v("按需加载模块的目的是实现代码分隔，用户打开首页时不用下载全部的代码，打开特定的页面加载特定的代码。提高用户体验。")]),n._v(" "),t("p",[n._v("如果使用的是react-router，官网文档给出的 "),t("a",{attrs:{href:"https://reacttraining.com/react-router/web/guides/code-splitting",target:"_blank",rel:"noopener noreferrer"}},[n._v("方案"),t("OutboundLink")],1),n._v(" 是用webpack的bundle-loader")]),n._v(" "),t("p",[n._v("你可能也见过require.ensure。这是webpack的旧式写法，现在已不推荐。")]),n._v(" "),t("p",[n._v("我倾向于使用import()，这也是webpack推荐的。因为更符合规范。 "),t("a",{attrs:{href:"https://www.jianshu.com/p/a8702a5ec944",target:"_blank",rel:"noopener noreferrer"}},[n._v("这篇"),t("OutboundLink")],1),n._v(" 我有专门的介绍，社区中也有专门的 "),t("a",{attrs:{href:"https://gist.github.com/acdlite/a68433004f9d6b4cbc83b5cc3990c194",target:"_blank",rel:"noopener noreferrer"}},[n._v("方案"),t("OutboundLink")],1),n._v("。")]),n._v(" "),t("p",[n._v("我也用到项目中，代码如下\n其中City和Login页面是按需加载中的，你可以在network中看到进入这俩页面浏览器会先加载类似 1.chunk.js文件。")]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("import React from 'react'\nimport { BrowserRouter as Router, Route, Link, Switch } from 'react-router-dom'\nimport Home   from '$pages/Home/'\nimport List   from '$pages/List/'\n// import City   from '$pages/City/'\n// import Login  from '$pages/Login/'\nimport Detail from '$pages/Detail/'\nimport Search from '$pages/Search/'\nimport UserCenter  from '$pages/UserCenter/'\nimport Demo   from '$pages/Demo/'\nimport NoMatch from './404'\n\n// 异步按需加载component\nfunction asyncComponent(getComponent) {\n  return class AsyncComponent extends React.Component {\n    static Component = null;\n    state = { Component: AsyncComponent.Component };\n\n    componentWillMount() {\n      if (!this.state.Component) {\n        getComponent().then(({default: Component}) => {\n          AsyncComponent.Component = Component\n          this.setState({ Component })\n        })\n      }\n    }\n    render() {\n      const { Component } = this.state\n      if (Component) {\n        return <Component {...this.props} />\n      }\n      return null\n    }\n  }\n}\n\nfunction load(component) {\n  return import(`$pages/${component}/`)\n}\n\nconst Login = asyncComponent(() => load('Login'));\nconst City = asyncComponent(() => load('City'));\n\nexport class RouterMap extends React.Component {\n  render() {\n    return (\n      <Router>\n        <div>\n          { /*\n          <ul>\n            <li><Link to=\"/\">Home</Link></li>\n            <li><Link to=\"/list\">List</Link></li>\n          </ul>\n          <hr/>\n          */ }\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/login/:refer?\" component={Login} />\n            <Route path=\"/city\" component={City} />\n            <Route path=\"/user\" component={UserCenter} />\n            <Route path=\"/list\" component={List} />\n            <Route exact path=\"/demo\" component={Demo} />\n            <Route path=\"/search/:category/:keyword?\" component={Search} />\n            <Route path=\"/detail/:id\" component={Detail} />\n            <Route component={NoMatch}/>\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br"),t("span",{staticClass:"line-number"},[n._v("26")]),t("br"),t("span",{staticClass:"line-number"},[n._v("27")]),t("br"),t("span",{staticClass:"line-number"},[n._v("28")]),t("br"),t("span",{staticClass:"line-number"},[n._v("29")]),t("br"),t("span",{staticClass:"line-number"},[n._v("30")]),t("br"),t("span",{staticClass:"line-number"},[n._v("31")]),t("br"),t("span",{staticClass:"line-number"},[n._v("32")]),t("br"),t("span",{staticClass:"line-number"},[n._v("33")]),t("br"),t("span",{staticClass:"line-number"},[n._v("34")]),t("br"),t("span",{staticClass:"line-number"},[n._v("35")]),t("br"),t("span",{staticClass:"line-number"},[n._v("36")]),t("br"),t("span",{staticClass:"line-number"},[n._v("37")]),t("br"),t("span",{staticClass:"line-number"},[n._v("38")]),t("br"),t("span",{staticClass:"line-number"},[n._v("39")]),t("br"),t("span",{staticClass:"line-number"},[n._v("40")]),t("br"),t("span",{staticClass:"line-number"},[n._v("41")]),t("br"),t("span",{staticClass:"line-number"},[n._v("42")]),t("br"),t("span",{staticClass:"line-number"},[n._v("43")]),t("br"),t("span",{staticClass:"line-number"},[n._v("44")]),t("br"),t("span",{staticClass:"line-number"},[n._v("45")]),t("br"),t("span",{staticClass:"line-number"},[n._v("46")]),t("br"),t("span",{staticClass:"line-number"},[n._v("47")]),t("br"),t("span",{staticClass:"line-number"},[n._v("48")]),t("br"),t("span",{staticClass:"line-number"},[n._v("49")]),t("br"),t("span",{staticClass:"line-number"},[n._v("50")]),t("br"),t("span",{staticClass:"line-number"},[n._v("51")]),t("br"),t("span",{staticClass:"line-number"},[n._v("52")]),t("br"),t("span",{staticClass:"line-number"},[n._v("53")]),t("br"),t("span",{staticClass:"line-number"},[n._v("54")]),t("br"),t("span",{staticClass:"line-number"},[n._v("55")]),t("br"),t("span",{staticClass:"line-number"},[n._v("56")]),t("br"),t("span",{staticClass:"line-number"},[n._v("57")]),t("br"),t("span",{staticClass:"line-number"},[n._v("58")]),t("br"),t("span",{staticClass:"line-number"},[n._v("59")]),t("br"),t("span",{staticClass:"line-number"},[n._v("60")]),t("br"),t("span",{staticClass:"line-number"},[n._v("61")]),t("br"),t("span",{staticClass:"line-number"},[n._v("62")]),t("br"),t("span",{staticClass:"line-number"},[n._v("63")]),t("br"),t("span",{staticClass:"line-number"},[n._v("64")]),t("br"),t("span",{staticClass:"line-number"},[n._v("65")]),t("br"),t("span",{staticClass:"line-number"},[n._v("66")]),t("br"),t("span",{staticClass:"line-number"},[n._v("67")]),t("br"),t("span",{staticClass:"line-number"},[n._v("68")]),t("br"),t("span",{staticClass:"line-number"},[n._v("69")]),t("br"),t("span",{staticClass:"line-number"},[n._v("70")]),t("br"),t("span",{staticClass:"line-number"},[n._v("71")]),t("br"),t("span",{staticClass:"line-number"},[n._v("72")]),t("br")])]),t("p",[n._v("如果感觉这篇对你有用的朋友给我的 "),t("a",{attrs:{href:"https://github.com/mafeifan/react-dianping",target:"_blank",rel:"noopener noreferrer"}},[n._v("项目"),t("OutboundLink")],1),n._v(" 点个star")])])}),[],!1,null,null,null);s.default=a.exports}}]);