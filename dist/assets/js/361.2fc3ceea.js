(window.webpackJsonp=window.webpackJsonp||[]).push([[361],{798:function(s,e,n){"use strict";n.r(e);var t=n(30),a=Object(t.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h4",{attrs:{id:"behaviorsubject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#behaviorsubject"}},[s._v("#")]),s._v(" BehaviorSubject")]),s._v(" "),n("p",[s._v("BehaviorSubject 是 Subject 的一个变种，他的特点是会存储当前值，")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const subject = new rxjs.Subject();\nsubject.subscribe((next => {\n  console.log(next);\n}));\n// 去掉下面的注释才会输出结果\n// subject.next(1);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("而 BehaviorSubject  一旦 subscribe 就会执行，可以在定义时要初始化值。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const subject = new rxjs.BehaviorSubject(0);\n// 会输出 0\nsubject.subscribe((next => {\n  console.log(next);\n}));\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h4",{attrs:{id:"replaysubject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#replaysubject"}},[s._v("#")]),s._v(" ReplaySubject")]),s._v(" "),n("p",[s._v("在某些时候我们会希望 Subject 代表事件，但又能在新订阅时重新发送最后的几个元素，这时我们就可以用 ReplaySubject，范例如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  const count = 1;\n  const subject = new rxjs.ReplaySubject(count);\n\n  var observerA = {\n    next: value => console.log('A next: ' + value),\n    error: error => console.log('A error: ' + error),\n    complete: () => console.log('A complete!')\n  }\n\n  var observerB = {\n    next: value => console.log('B next: ' + value),\n    error: error => console.log('B error: ' + error),\n    complete: () => console.log('B complete!')\n  }\n\n  subject.subscribe(observerA);\n  subject.next(1);\n  // \"A next: 1\"\n  subject.next(2);\n  // \"A next: 2\"\n  subject.next(3);\n  // \"A next: 3\"\n\n  setTimeout(() => {\n    subject.subscribe(observerB);\n    // 根据传入 n 的不同\n    // \"B next: 2\"\n    // \"B next: 3\"\n  },3000)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("ReplaySubject(1) 不等同于 BehaviorSubject，BehaviorSubject 在建立时就会有起始值，比如 BehaviorSubject(0) 起始值就是 0，BehaviorSubject 是代表着状态而 ReplaySubject 只是事件的重放而已。")]),s._v(" "),n("h4",{attrs:{id:"asyncsubject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#asyncsubject"}},[s._v("#")]),s._v(" AsyncSubject")]),s._v(" "),n("p",[s._v("AsyncSubject 是最怪的一个变形，他有点像是 operator last，会在 subject 结束后送出最后一个值，范例如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  const subject = new rxjs.AsyncSubject();\n\n  var observerA = {\n    next: value  => console.log('A next: ' + value),\n    error: error => console.log('A error: ' + error),\n    complete: () => console.log('A complete!')\n  }\n\n  var observerB = {\n    next: value  => console.log('B next: ' + value),\n    error: error => console.log('B error: ' + error),\n    complete: () => console.log('B complete!')\n  }\n\n  subject.subscribe(observerA);\n  // 执行 next 并不会输出值\n  subject.next(1);\n  subject.next(2);\n  subject.next(3);\n  // 必须执行 complete 才会输出值\n  subject.complete();\n  setTimeout(() => {\n    subject.subscribe(observerB);\n    // \"B next: 2\"\n    // \"B next: 3\"\n  },3000)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("AsyncSubject 会在 Subject 结束后才送出最后一个值，其实这个行为跟 Promise 很像，都是等到事情结束后送出一个值，实际上我们非常少用到 AsyncSubject，绝大部分的时候都是使用 BehaviorSubject 跟 ReplaySubject 或 Subject。")]),s._v(" "),n("h4",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考：")]),s._v(" "),n("p",[s._v("https://segmentfault.com/a/1190000005069851\nhttps://ithelp.ithome.com.tw/articles/10188677")])])}),[],!1,null,null,null);e.default=a.exports}}]);