(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{709:function(e,r,a){"use strict";a.r(r);var s=a(30),t=Object(s.a)({},(function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Angular 中的管道其实就是angularjs或vue中的过滤器，用来转换数据然后显示给用户。\n本质上就是一个纯函数。")]),e._v(" "),a("p",[e._v("要创建一个管道，必须实现 "),a("a",{attrs:{href:"https://angular.cn/api/core/PipeTransform",target:"_blank",rel:"noopener noreferrer"}},[e._v("PipeTransform 接口"),a("OutboundLink")],1),e._v("。这个接口非常简单，只需要实现"),a("code",[e._v("transform")]),e._v("方法即可。\n使用管道的几个注意事项：")]),e._v(" "),a("ol",[a("li",[e._v("管道可以链式使用，还可以传参\n"),a("code",[e._v(e._s(e._f("uppercase")(e._f("date: 'fullDate'")(e.date))))])]),e._v(" "),a("li",[e._v("管道分两种 纯(pure)管道与非纯(impure)管道\n默认是pure的。\nAngular 只有在它检测到输入值发生了纯变更时才会执行纯管道。 纯变更是指对原始类型值(String、Number、Boolean、Symbol)的更改， 或者对对象引用(Date、Array、Function、Object)的更改。")])]),e._v(" "),a("blockquote",[a("p",[e._v("使用 impure 管道时候要小心，很可能触发非常频繁。")])]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("也是出于性能的考虑。Angular并没有提供 angularjs 自带的 Filter 和 OrderBy 过滤器，Angular官方推荐把过滤和排序放到组件中实现，比如对外提供"),a("code",[e._v("filteredHeroes")]),e._v(" 或 "),a("code",[e._v("sortedHeroes")]),e._v(" 属性")])]),e._v(" "),a("p",[e._v("Angular提供了json和async管道，我们来分析下源码")]),e._v(" "),a("h2",{attrs:{id:"源码解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#源码解析"}},[e._v("#")]),e._v(" 源码解析")]),e._v(" "),a("h5",{attrs:{id:"json管道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#json管道"}},[e._v("#")]),e._v(" json管道")]),e._v(" "),a("p",[e._v("/node_modules/@angular/common/esm5/src/pipes/json_pipe.js\n非常简单，就一行话。\n"),a("code",[e._v("JsonPipe.prototype.transform = function (value) { return JSON.stringify(value, null, 2); };")])]),e._v(" "),a("h5",{attrs:{id:"async管道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async管道"}},[e._v("#")]),e._v(" async管道")]),e._v(" "),a("p",[e._v("这个是Angular特有的管道，可以多使用\n其实会处理两种对象类型，Observable或Promise，简单说如果是Observable会执行subscription方法，如果是Promise会调用then方法。如果是Observable当组件销毁时执行unsubscribe方法取消订阅。\nnode_modules/@angular/common/esm5/src/pipes/async_pipe.js:11")]),e._v(" "),a("h3",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),a("p",[e._v("https://segmentfault.com/a/1190000008759314")])])}),[],!1,null,null,null);r.default=t.exports}}]);