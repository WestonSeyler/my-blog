(window.webpackJsonp=window.webpackJsonp||[]).push([[401],{840:function(a,s,t){"use strict";t.r(s);var e=t(30),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("之前分享过一个 "),t("a",{attrs:{href:"https://www.jianshu.com/p/c34e8a1119ac",target:"_blank",rel:"noopener noreferrer"}},[a._v("ngrok内网穿透工具"),t("OutboundLink")],1),a._v("，这个不是开源的，再推荐一个国人开发的免费开源工具 "),t("a",{attrs:{href:"https://github.com/fatedier/frp/blob/master/README_zh.md",target:"_blank",rel:"noopener noreferrer"}},[a._v("frp"),t("OutboundLink")],1),a._v("，配置项更多，功能更强大。\n不过需要你有一台公网IP的服务器，如果要访问内网的web服务，还需要一个域名。")]),a._v(" "),t("h3",{attrs:{id:"准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[a._v("#")]),a._v(" 准备")]),a._v(" "),t("ul",[t("li",[a._v("公网服务器，假设 系统 Linux Ubuntu,  公网IP 140.140.192.192， 绑定了域名 www.good.com")]),a._v(" "),t("li",[a._v("本机 Mac 系统，跑着一个Angular程序，在本地访问，地址是 localhost:4200")])]),a._v(" "),t("h3",{attrs:{id:"效果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#效果"}},[a._v("#")]),a._v(" 效果")]),a._v(" "),t("p",[a._v("利用frp，可以实现任何人都可以通过配置的端口如 "),t("code",[a._v("www.good.com:7001")]),a._v(" 访问我本机的Angular程序")]),a._v(" "),t("h3",{attrs:{id:"方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[a._v("#")]),a._v(" 方法")]),a._v(" "),t("ol",[t("li",[a._v("服务器和内网本机分别"),t("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载"),t("OutboundLink")],1),a._v("对应系统平台的frp，\n这里ubuntu服务器需要下载linux_arm_64， mac本机是darwin_amd64。")]),a._v(" "),t("li",[a._v("先配服务端，在服务器上下载解压，编辑 frps.ini， 然后启动 "),t("code",[a._v("./frps -c ./frps.ini")]),a._v("，放后台启动命令 "),t("code",[a._v("nohup ./frps -c ./frps.ini &")])])]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[common]\nbind_port = 7000\n# 客户端定义的端口\nvhost_http_port = 7001\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[a._v("配置客户端，同样下载解压")])]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget https://github.com/fatedier/frp/releases/download/v0.23.1/frp_0.23.1_darwin_amd64.tar.gz\ntar -zxvf  frp_0.23.1_darwin_amd64.tar.gz\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("编辑 "),t("code",[a._v("frpc.ini")])]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[common]\nserver_addr = 140.140.192.192   #公网服务器ip\nserver_port = 7001                       #与服务端bind_port一致\n \n#公网访问内部web服务器以http方式\n[web]\ntype = http         #访问协议\nlocal_port = 4200   #内网web服务的端口号\ncustom_domains = www.good.com   #所绑定的公网服务器域名，一级、二级域名都可以\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[a._v("浏览器打开 www.good.com:4300 测试")])]),a._v(" "),t("h3",{attrs:{id:"进阶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进阶"}},[a._v("#")]),a._v(" 进阶")]),a._v(" "),t("p",[a._v("修改服务端的 frps.ini， 添加 dashboard 信息，重启启动后可以通过"),t("code",[a._v("140.140.192.192:7500")]),a._v("打开控制面板")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[common]\nbind_port = 7000\n# 客户端定义的端口\nvhost_http_port = 7001\n\ndashboard_port = 7500\n# dashboard 用户名密码，默认都为 admin\ndashboard_user = admin\ndashboard_pwd = admin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("blockquote",[t("p",[t("img",{attrs:{src:"https://hexo-blog.pek3b.qingstor.com/upload_images/71414-f1561d0838b92e15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}})])]),a._v(" "),t("h3",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[a._v("#")]),a._v(" 注意事项")]),a._v(" "),t("blockquote",[t("p",[a._v("报 Invalid Host header")])]),a._v(" "),t("p",[a._v("如果本机的web项目用了webpack server(目前vue cli, react cli, angular 本地开发用的都是这个) , 这个是webpack server的安全策略，如果是angular项目，需要在启动配置中加上 "),t("code",[a._v("--disable-host-check")]),a._v(" 类似 "),t("code",[a._v("ng serve --open --host $IP --port $PORT --disable-host-check")])]),a._v(" "),t("h3",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),t("p",[a._v("https://blog.csdn.net/u013144287/article/details/78589643/")])])}),[],!1,null,null,null);s.default=r.exports}}]);