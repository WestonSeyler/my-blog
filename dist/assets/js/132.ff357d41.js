(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{570:function(s,e,n){"use strict";n.r(e);var l=n(30),i=Object(l.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"环境配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境配置"}},[s._v("#")]),s._v(" 环境配置")]),s._v(" "),n("p",[s._v("Ansible配置以ini格式存储配置数据，在Ansible中几乎所有配置都可以通过Ansible的Playbook或环境变量来重新赋值。在运行Ansible命令时，命令将会按照以下优先级查找配置文件。")]),s._v(" "),n("ul",[n("li",[s._v("ANSIBLE_CONFIG 这个环境变量所指向的配置文件。")]),s._v(" "),n("li",[s._v("./ansible.cfg：当前目录下的"),n("code",[s._v("ansible.cfg")]),s._v("配置文件。")]),s._v(" "),n("li",[s._v("~/.ansible.cfg：检查当前用户家目录下的"),n("code",[s._v(".ansible.cfg")]),s._v("配置文件。")]),s._v(" "),n("li",[s._v("/etc/ansible/ansible.cfg：最后，将会检查在用软件包管理工具安装Ansible时自动产生的配置文件。")])]),s._v(" "),n("blockquote",[n("p",[s._v("使用 ansible.cfg 来简化你的配置")])]),s._v(" "),n("p",[s._v("大多数的Ansible参数可以通过设置带有 ANSIBLE_ 开头的环境变量进行配置，参数名称必须都是大写字母，如下配置:\n"),n("code",[s._v("export ANSIBLE_SUDO_USER=root")]),s._v("\n设置了环境变量之后， ANSIBLE_SUDO_USER 就可以在后续操作中直接引用。")]),s._v(" "),n("h3",{attrs:{id:"ansible-cfg-配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ansible-cfg-配置文件"}},[s._v("#")]),s._v(" ansible.cfg 配置文件")]),s._v(" "),n("p",[s._v("Ansible有很多配置参数，以下是几个默认的配置参数：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" inventory = /etc/ansible/hosts\n library = /usr/share/my_modules/\n forks = 5\n sudo_user = root\n remote_port = 22\n host_key_checking = False\n timeout = 20\n log_path = /var/log/ansible.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[s._v("inventory :该参数表示inventory文件的位置，资源清单(inventory)就是Ansible需要连接管理的一些主机列表。 library :Ansible的所有操作都使用模块来执行实现，这个library参数就是指向存放Ansible模块的目录。")]),s._v(" "),n("li",[s._v("forks :设置默认情况下Ansible最多能有多少个进程同时工作，默认5个进程并行处理。具体需要设置多少个，可\n以根据控制端性能和被管理节点的数量来确定。")]),s._v(" "),n("li",[s._v("sudo_user :设置默认执行命令的用户，也可以在playbo o k中重新设置这个参数。")]),s._v(" "),n("li",[s._v("remote_port :指定连接被管理节点的管理端口，默认是22，除非设置了特殊的SSH端口，否则不需要修改此参数。 host_key_checking :设置是否检查SSH主机的密钥。可以设置为True或False。即ssh的主机再次验证。")]),s._v(" "),n("li",[s._v("timeout :设置SSH连接的超时间隔，单位是秒。")]),s._v(" "),n("li",[s._v("log_path :Ansible默认不记录日志，如果想把Ansible系统的输出记录到日志文件中，需要设置log_path。需要注\n意，模块将会调用被管节点的(r)syslog来记录，执行Ansible的用户需要有写入日志的权限。")])]),s._v(" "),n("blockquote",[n("p",[s._v("建议使用Git等版本控制工具保管你的playbook和inventory文件")])])])}),[],!1,null,null,null);e.default=i.exports}}]);